name: release
on:
    workflow_dispatch:

permissions:
    contents: write

jobs:
    build:
      runs-on: ubuntu-latest
      name: build
      steps:
        - uses: actions/checkout@v3

        - name: Zig Build
          uses: korandoru/setup-zig@v1
          with:
            zig-version: master
        - run: zig build -Dtarget=x86_64-linux -Doptimize=ReleaseFast
        - run: zig build -Dtarget=x86_64-windows -Doptimize=ReleaseFast
        
        - name: Create Release
          uses: ncipollo/release-action@v1
          with:
            artifacts: "release/bruter,release/bruter.exe"
            tag: ${{ vars.VERSION }}
